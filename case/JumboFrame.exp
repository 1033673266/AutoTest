#!/usr/bin/expect -f
set mac1 [lindex $argv 0]
set ip1 [lindex $argv 1]
set mac2 [lindex $argv 2]
set ip2 [lindex $argv 3]

set timeout 4

spawn scapy

expect ">>>" {
    send "sendp(\[Ether(dst=\"${mac1}\")/IP(dst=\"${ip1}\")/Raw(load=\"A\"*(8800))\], iface=\"eth1\", count=10) \r"
}

sleep 10
expect ">>>" {
    send "sendp(\[Ether(dst=\"${mac1}\")/IP(dst=\"${ip1}\")/Raw(load=\"A\"*(8800))\], iface=\"eth1\", count=10) \r"
}

sleep 10
expect ">>>" {
    send "sendp(\[Ether(dst=\"${mac1}\")/IP(dst=\"${ip1}\")/Raw(load=\"A\"*(8800))\], iface=\"eth1\", count=10) \r"
}

sleep 10
expect ">>>" {
    send "sendp(\[Ether(dst=\"${mac1}\")/IP(dst=\"${ip1}\")/Raw(load=\"A\"*(8800))\], iface=\"eth1\", count=10) \r"
}

expect eof


